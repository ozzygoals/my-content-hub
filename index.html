<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            display: flex;
            gap: 20px;
        }
        .column {
            width: 300px;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            background-color: #f9f9f9;
            overflow-y: auto;
            height: 400px;
        }
        .content-card {
            border: 1px solid #ddd;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background-color: #fff;
            position: relative;
        }
        .active {
            background-color: #e6f7ff;
        }
        .btn {
            margin-top: 5px;
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .btn-delete {
            background-color: #dc3545;
        }
        #filter-container {
            margin-bottom: 20px;
        }
        #notification {
            display: none;
            background-color: #28a745;
            color: white;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        input[type="text"], input[type="url"], select {
            width: calc(100% - 20px);
            padding: 5px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div id="filter-container">
        <input type="text" id="filter-title" placeholder="Filter by title">
        <select id="filter-type" onchange="filterContent()">
            <option value="">All Types</option>
            <option value="Article">Article</option>
            <option value="Video">Video</option>
            <option value="Podcast">Podcast</option>
        </select>
        <button class="btn" onclick="clearFilter()">Clear Filter</button>
    </div>

    <div id="notification">Content saved successfully!</div>

    <div id="content-list">
        <div class="column" id="unread-column" ondrop="drop(event, 'unread')" ondragover="allowDrop(event)">
            <h2>Unread Content</h2>
        </div>
        <div class="column" id="read-column" ondrop="drop(event, 'read')" ondragover="allowDrop(event)">
            <h2>Read Content</h2>
        </div>
    </div>

    <script>
        let contentArray = JSON.parse(localStorage.getItem('contents')) || [];

        // Allow Drop Function
        function allowDrop(event) {
            event.preventDefault();
        }

        // Drag Function
        function drag(event, index) {
            event.dataTransfer.setData("text/plain", index);
        }

        // Drop Function
        function drop(event, status) {
            event.preventDefault();
            const index = event.dataTransfer.getData("text/plain");
            const content = contentArray[index];

            // Update the status and re-render
            if (status === 'read') {
                content.read = true;
            } else {
                content.read = false;
            }
            localStorage.setItem('contents', JSON.stringify(contentArray));
            displaySavedContent();
        }

        // Display Saved Content
        function displaySavedContent() {
            const unread = contentArray.filter(content => !content.read);
            const read = contentArray.filter(content => content.read);

            const createColumn = (contents) => {
                return contents.map((content, index) => `
                    <div class="content-card" draggable="true" ondragstart="drag(event, ${index})">
                        <input type="text" value="${content.title}" onblur="updateContent(${index}, 'title', this.value)" />
                        <input type="text" value="${content.description || 'No description provided.'}" onblur="updateContent(${index}, 'description', this.value)" />
                        <input type="url" value="${content.url}" onblur="updateContent(${index}, 'url', this.value)" />
                        <select onblur="updateContent(${index}, 'type', this.value)">
                            <option value="Article" ${content.type === 'Article' ? 'selected' : ''}>Article</option>
                            <option value="Video" ${content.type === 'Video' ? 'selected' : ''}>Video</option>
                            <option value="Podcast" ${content.type === 'Podcast' ? 'selected' : ''}>Podcast</option>
                        </select>
                        <input type="text" value="${content.priority}" onblur="updateContent(${index}, 'priority', this.value)" />
                        <button class="btn" onclick="deleteContent(${index})">Delete</button>
                    </div>
                `).join('');
            };

            document.getElementById('unread-column').innerHTML = createColumn(unread);
            document.getElementById('read-column').innerHTML = createColumn(read);
        }

        // Update Content
        function updateContent(index, field, value) {
            contentArray[index][field] = value;
            localStorage.setItem('contents', JSON.stringify(contentArray));
            displaySavedContent();
        }

        // Filter Content
        function filterContent() {
            const filterTitle = document.getElementById('filter-title').value.toLowerCase();
            const filterType = document.getElementById('filter-type').value;

            const filteredContent = contentArray.filter(content => {
                const matchesTitle = content.title.toLowerCase().includes(filterTitle);
                const matchesType = filterType ? content.type === filterType : true;
                return matchesTitle && matchesType;
            });

            displaySavedContent(filteredContent);
        }

        // Clear Filter
        function clearFilter() {
            document.getElementById('filter-title').value = '';
            document.getElementById('filter-type').value = '';
            displaySavedContent();
        }

        // Delete Content
        function deleteContent(index) {
            contentArray.splice(index, 1);
            localStorage.setItem('contents', JSON.stringify(contentArray));
            displaySavedContent();
        }

        // Show Notification
        function showNotification() {
            const notification = document.getElementById('notification');
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }

        // Initial Display
        displaySavedContent();
    </script>
</body>
</html>
