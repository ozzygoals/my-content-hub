<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saved Content Manager</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .content-item {
            margin-bottom: 10px;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
        }
        .content-title {
            font-weight: bold;
            cursor: pointer;
        }
        .collapsible {
            display: none;
            margin-top: 10px;
        }
        .hidden {
            display: none;
        }
        .edit-button, .delete-button {
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <h1>Saved Content Manager</h1>

    <div id="content-form" class="hidden">
        <h3>Add Content</h3>
        <label for="content-title">Title:</label>
        <input type="text" id="content-title"><br><br>
        <label for="content-url">URL:</label>
        <input type="text" id="content-url"><br><br>
        <label for="content-tags">Tags (comma separated):</label>
        <input type="text" id="content-tags"><br><br>
        <label for="content-priority">Priority:</label>
        <select id="content-priority">
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
        </select><br><br>
        <label for="content-type">Type:</label>
        <select id="content-type">
            <option value="article">Article</option>
            <option value="video">Video</option>
            <option value="podcast">Podcast</option>
        </select><br><br>
        <label for="content-description">Description:</label>
        <textarea id="content-description"></textarea><br><br>
        <button onclick="saveContent()">Save Content</button>
        <button onclick="toggleForm()">Cancel</button>
    </div>

    <button onclick="toggleForm()">Add New Content</button>

    <div id="content-list">
        <h3>Incomplete Content</h3>
        <div id="incomplete-content"></div>

        <h3>Completed Content</h3>
        <div id="complete-content"></div>
    </div>

    <script>
        let savedContent = JSON.parse(localStorage.getItem('savedContent')) || [];
        let currentEditIndex = -1;

        function displaySavedContent() {
            const incompleteContent = document.getElementById('incomplete-content');
            const completeContent = document.getElementById('complete-content');
            incompleteContent.innerHTML = '';
            completeContent.innerHTML = '';

            savedContent.forEach((content, index) => {
                const contentItem = document.createElement('div');
                contentItem.classList.add('content-item');

                const collapsibleTitle = document.createElement('div');
                collapsibleTitle.classList.add('content-title');
                collapsibleTitle.innerHTML = content.title;
                collapsibleTitle.onclick = () => toggleDetails(index);

                const details = document.createElement('div');
                details.classList.add('collapsible');
                details.id = `content-${index}`;

                let buttonsHTML = `
                    <button class="edit-button" onclick="startEdit(${index})">Edit</button>
                    <button class="delete-button" onclick="deleteContent(${index})">Delete</button>
                `;

                if (content.editMode) {
                    details.innerHTML = `
                        <p>Title: <input type="text" value="${content.title}" onchange="editField(${index}, 'title', this.value)"></p>
                        <p>URL: <input type="text" value="${content.url}" onchange="editField(${index}, 'url', this.value)"></p>
                        <p>Tags: <input type="text" value="${content.tags.join(', ')}" onchange="editField(${index}, 'tags', this.value.split(',').map(tag => tag.trim()))"></p>
                        <p>Priority: <select onchange="editField(${index}, 'priority', this.value)">
                            <option value="low" ${content.priority === 'low' ? 'selected' : ''}>Low</option>
                            <option value="medium" ${content.priority === 'medium' ? 'selected' : ''}>Medium</option>
                            <option value="high" ${content.priority === 'high' ? 'selected' : ''}>High</option>
                        </select></p>
                        <p>Type: <select onchange="editField(${index}, 'type', this.value)">
                            <option value="article" ${content.type === 'article' ? 'selected' : ''}>Article</option>
                            <option value="video" ${content.type === 'video' ? 'selected' : ''}>Video</option>
                            <option value="podcast" ${content.type === 'podcast' ? 'selected' : ''}>Podcast</option>
                        </select></p>
                        <p>Description: <textarea onchange="editField(${index}, 'description', this.value)">${content.description}</textarea></p>
                        <button onclick="endEdit()">Done</button>
                    `;
                } else {
                    details.innerHTML = `
                        <p>Description: ${content.description}</p>
                        <p>Tags: ${content.tags.join(', ')}</p>
                        <p>Priority: ${content.priority}</p>
                        <p>Type: ${content.type}</p>
                        ${buttonsHTML}
                    `;
                }

                contentItem.appendChild(collapsibleTitle);
                contentItem.appendChild(details);

                if (content.consumed) {
                    completeContent.appendChild(contentItem);
                } else {
                    incompleteContent.appendChild(contentItem);
                }
            });
        }

        function toggleDetails(index) {
            savedContent.forEach((content, i) => {
                if (i !== index) {
                    content.editMode = false; // Exit edit mode on other cards
                    document.getElementById(`content-${i}`).style.display = 'none'; // Collapse other cards
                }
            });

            const details = document.getElementById(`content-${index}`);
            const content = savedContent[index];
            if (details.style.display === 'block') {
                details.style.display = 'none';
            } else {
                details.style.display = 'block';
            }

            localStorage.setItem('savedContent', JSON.stringify(savedContent));
            displaySavedContent();
        }

        function saveContent() {
            const title = document.getElementById('content-title').value;
            const url = document.getElementById('content-url').value;
            const tags = document.getElementById('content-tags').value.split(',').map(tag => tag.trim());
            const priority = document.getElementById('content-priority').value;
            const type = document.getElementById('content-type').value;
            const description = document.getElementById('content-description').value;

            const content = {
                title,
                url,
                tags,
                priority,
                type,
                description,
                consumed: false,
                editMode: false
            };

            if (currentEditIndex > -1) {
                savedContent[currentEditIndex] = content;
                currentEditIndex = -1;
            } else {
                savedContent.push(content);
            }

            localStorage.setItem('savedContent', JSON.stringify(savedContent));
            displaySavedContent();
            clearForm();
        }

        function editField(index, field, value) {
            savedContent[index][field] = value;
            localStorage.setItem('savedContent', JSON.stringify(savedContent));
            displaySavedContent();
        }

        function toggleConsume(index) {
            savedContent[index].consumed = !savedContent[index].consumed;
            localStorage.setItem('savedContent', JSON.stringify(savedContent));
            displaySavedContent();
        }

        function startEdit(index) {
            savedContent[index].editMode = true;
            displaySavedContent();
        }

        function endEdit() {
            savedContent.forEach(content => {
                content.editMode = false;
            });
            displaySavedContent();
        }

        function deleteContent(index) {
            savedContent.splice(index, 1);
            localStorage.setItem('savedContent', JSON.stringify(savedContent));
            displaySavedContent();
        }

        function toggleForm() {
            const form = document.getElementById('content-form');
            form.classList.toggle('hidden');
        }

        function clearForm() {
            document.getElementById('content-title').value = '';
            document.getElementById('content-url').value = '';
            document.getElementById('content-tags').value = '';
            document.getElementById('content-priority').value = 'low';
            document.getElementById('content-type').value = 'article';
            document.getElementById('content-description').value = '';
        }

        displaySavedContent();
    </script>
</body>
</html>
