<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            display: flex;
            gap: 20px;
        }
        .column {
            width: 300px;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            background-color: #f9f9f9;
            overflow-y: auto;
            height: 400px;
        }
        .content-card {
            border: 1px solid #ddd;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background-color: #fff;
            position: relative;
            transition: max-height 0.2s ease-in-out;
            cursor: pointer;
        }
        .card-title {
            font-weight: bold;
            color: #007bff;
            text-decoration: underline;
            display: block;
            margin-bottom: 5px;
        }
        .card-content {
            display: none;
            margin-top: 10px;
        }
        .content-card.expanded .card-content {
            display: block;
        }
        .btn {
            margin-top: 5px;
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .btn-delete {
            background-color: #dc3545;
        }
        #filter-container {
            margin-bottom: 20px;
        }
        #notification {
            display: none;
            background-color: #28a745;
            color: white;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        input[type="text"], input[type="url"], select {
            width: calc(100% - 20px);
            padding: 5px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            width: 300px;
            text-align: center;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="filter-container">
        <input type="text" id="filter-title" placeholder="Filter by title">
        <select id="filter-type" onchange="filterContent()">
            <option value="">All Types</option>
            <option value="Article">Article</option>
            <option value="Video">Video</option>
            <option value="Podcast">Podcast</option>
        </select>
        <button class="btn" onclick="clearFilter()">Clear Filter</button>
        <button class="btn" onclick="openModal()">Add New Content</button>
    </div>

    <div id="notification">Content saved successfully!</div>

    <div id="content-list">
        <div class="column" id="unread-column" ondrop="drop(event, 'unread')" ondragover="allowDrop(event)">
            <h2>Unread</h2>
        </div>
        <div class="column" id="read-column" ondrop="drop(event, 'read')" ondragover="allowDrop(event)">
            <h2>Read</h2>
        </div>
    </div>

    <!-- Modal for Adding New Content -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Add New Content</h2>
            <input type="text" id="new-title" placeholder="Title" required><br>
            <input type="text" id="new-description" placeholder="Description" required><br>
            <input type="url" id="new-url" placeholder="URL" required><br>
            <select id="new-type" required>
                <option value="Article">Article</option>
                <option value="Video">Video</option>
                <option value="Podcast">Podcast</option>
            </select><br>
            <input type="text" id="new-priority" placeholder="Priority" required><br>
            <button class="btn" onclick="addNewContent()">Save</button>
        </div>
    </div>

    <script>
        let contentArray = JSON.parse(localStorage.getItem('contents')) || [];

        // Allow Drop Function
        function allowDrop(event) {
            event.preventDefault();
        }

        // Drag Function
        function drag(event, index) {
            event.dataTransfer.setData("text/plain", index);
        }

        // Drop Function
        function drop(event, status) {
            event.preventDefault();
            const index = event.dataTransfer.getData("text/plain");
            const content = contentArray[index];

            // Update the status and re-render
            content.read = status === 'read';
            localStorage.setItem('contents', JSON.stringify(contentArray));
            displaySavedContent();
        }

        // Toggle content card expansion
        function toggleCardExpansion(index) {
            const card = document.getElementById(`card-${index}`);
            card.classList.toggle('expanded');
        }

        // Display Saved Content
        function displaySavedContent() {
            const unread = contentArray.filter(content => !content.read);
            const read = contentArray.filter(content => content.read);

            const createColumn = (contents) => {
                return contents.map((content, index) => `
                    <div class="content-card" id="card-${index}" draggable="true" ondragstart="drag(event, ${index})" onclick="toggleCardExpansion(${index})">
                        <a class="card-title" href="${content.url}" target="_blank">${content.title}</a>
                        <div class="card-content">
                            <input type="text" value="${content.description || 'No description provided.'}" onblur="updateContent(${index}, 'description', this.value)" />
                            <input type="url" value="${content.url}" onblur="updateContent(${index}, 'url', this.value)" />
                            <select onblur="updateContent(${index}, 'type', this.value)">
                                <option value="Article" ${content.type === 'Article' ? 'selected' : ''}>Article</option>
                                <option value="Video" ${content.type === 'Video' ? 'selected' : ''}>Video</option>
                                <option value="Podcast" ${content.type === 'Podcast' ? 'selected' : ''}>Podcast</option>
                            </select>
                            <input type="text" value="${content.priority}" onblur="updateContent(${index}, 'priority', this.value)" />
                            <button class="btn btn-delete" onclick="deleteContent(${index})">Delete</button>
                        </div>
                    </div>
                `).join('');
            };

            document.getElementById('unread-column').innerHTML = createColumn(unread);
            document.getElementById('read-column').innerHTML = createColumn(read);
        }

        // Update Content
        function updateContent(index, field, value) {
            contentArray[index][field] = value;
            localStorage.setItem('contents', JSON.stringify(contentArray));
            displaySavedContent();
            showNotification();
        }

        // Filter Content
        function filterContent() {
            const filterTitle = document.getElementById('filter-title').value.toLowerCase();
            const filterType = document.getElementById('filter-type').value;

            const filteredContent = contentArray.filter(content => {
                const matchesTitle = content.title.toLowerCase().includes(filterTitle);
                const matchesType = filterType ? content.type === filterType : true;
                return matchesTitle && matchesType;
            });

            displaySavedContent(filteredContent);
        }

        // Clear Filter
        function clearFilter() {
            document.getElementById('filter-title').value = '';
            document.getElementById('filter-type').value = '';
            displaySavedContent();
        }

        // Delete Content
        function deleteContent(index) {
            contentArray.splice(index, 1);
            localStorage.setItem('contents', JSON.stringify(contentArray));
            displaySavedContent();
        }

        // Add New Content
        function addNewContent() {
            const title = document.getElementById('new-title').value;
            const description = document.getElementById('new-description').value;
            const url = document.getElementById('new-url').value;
            const type = document.getElementById('new-type').value;
            const priority = document.getElementById('new-priority').value;

            contentArray.push({ title, description, url, type, priority, read: false });
            localStorage.setItem('contents', JSON.stringify(contentArray));
            closeModal();
            displaySavedContent();
            showNotification();
        }

        // Open Modal
        function openModal() {
            document.getElementById('myModal').style.display = "flex";
        }

        // Close Modal
        function closeModal() {
            document.getElementById('myModal').style.display = "none";
        }

        // Show Notification
        function showNotification() {
            const notification = document.getElementById('notification');
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }

        // Initialize display
        window.onload = function() {
            displaySavedContent();
        };
    </script>
</body>
</html>
